<!doctype html><html class="theme-next mist use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Monda:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css"><meta name="keywords" content="Compiler,Vectorization,"><link rel="alternate" href="/atom.xml" title="HAMSTERSI" type="application/atom+xml"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0"><meta name="description" content="Guidelines to Vectorize Innermost LoopsUse:straight-line code (a single basic block).vector data only; that is, arrays and invariant expressions on the right hand side of assignments.only assignment s"><meta property="og:type" content="article"><meta property="og:title" content="Vectorization with Intel Compiler"><meta property="og:url" content="http://hamstersi.github.io/2017/07/Vectorization with Intel Compiler/index.html"><meta property="og:site_name" content="HAMSTERSI"><meta property="og:description" content="Guidelines to Vectorize Innermost LoopsUse:straight-line code (a single basic block).vector data only; that is, arrays and invariant expressions on the right hand side of assignments.only assignment s"><meta property="og:updated_time" content="2017-08-10T12:02:45.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Vectorization with Intel Compiler"><meta name="twitter:description" content="Guidelines to Vectorize Innermost LoopsUse:straight-line code (a single basic block).vector data only; that is, arrays and invariant expressions on the right hand side of assignments.only assignment s"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",sidebar:{position:"left",display:"always"},fancybox:!0,motion:!0,duoshuo:{userId:"undefined",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://hamstersi.github.io/2017/07/Vectorization with Intel Compiler/"><title>Vectorization with Intel Compiler | HAMSTERSI</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><script type="text/javascript">!function(){var e=document.createElement("script");e.src="//tajs.qq.com/stats?sId=60753873";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><div style="display:none"><script src="//s95.cnzz.com/z_stat.php?id=1261299152&web_id=1261299152" language="JavaScript"></script></div><div class="container one-collumn sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="site-title">HAMSTERSI</span></a></div><p class="site-subtitle">生性涼薄 擇木而修</p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-about"><a href="/about" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup"><span class="search-icon fa fa-search"></span> <input type="text" id="local-search-input"><div id="local-search-result"></div><span class="popup-btn-close">close</span></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://hamstersi.github.io/2017/07/Vectorization with Intel Compiler/"><span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Hamster Si"><meta itemprop="description" content=""><meta itemprop="image" content="/images/logo@2x.png"></span><span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="HAMSTERSI"><span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject"><img style="display:none" itemprop="url image" alt="HAMSTERSI" src=""></span></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Vectorization with Intel Compiler</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-text">发表</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-13T19:10:38+08:00">2017-07-13 </time></span><span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-text">分类</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Tech/" itemprop="url" rel="index"><span itemprop="name">Tech</span> </a></span></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-text">标签</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/tags/Compiler/" itemprop="url" rel="tag"><span itemprop="name">#Compiler</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/tags/Vectorization/" itemprop="url" rel="tag"><span itemprop="name">#Vectorization</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><script src="/assets/js/APlayer.min.js"></script><h1 id="Guidelines-to-Vectorize-Innermost-Loops"><a href="#Guidelines-to-Vectorize-Innermost-Loops" class="headerlink" title="Guidelines to Vectorize Innermost Loops"></a>Guidelines to Vectorize Innermost Loops</h1><p>Use:</p><ol><li><p>straight-line code (a single basic block).</p></li><li><p>vector data only; that is, arrays and invariant expressions on the right hand side of assignments.</p></li><li><p>only assignment statements.</p></li></ol><p>Avoid:</p><ol><li><p>function calls (other than math library calls).</p></li><li><p>non-vectorizable operations (either because the loop cannot be vectorized, or because an operation is emulated through a number of instructions).</p></li><li><p>mixing vectorizable types in the same loop (leads to lower resource utilization).</p></li><li><p>data-dependent loop exit conditions (leads to loss of vectorization).</p></li></ol><a id="more"></a><p>To make your code vectorizable, you will often need to make some changes to your loops. You should only make changes needed to enable vectorization, and avoid these common changes:</p><ol><li><p>loop unrolling, which the compiler performs automatically.</p></li><li><p>decomposing one loop with several statements in the body into several single-statement loops</p></li></ol><h1 id="Restrictions"><a href="#Restrictions" class="headerlink" title="Restrictions"></a>Restrictions</h1><table><thead><tr><th>Factor</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td>Hardware</td><td style="text-align:left">The compiler is limited by restrictions imposed by the underlying hardware. In the case of Intel® Streaming SIMD Extensions (Intel® SSE), the vector memory operations are limited to stride-1 accesses with a preference to 16-byte-aligned memory references. This means that if the compiler abstractly recognizes a loop as vectorizable, it still might not vectorize it for a distinct target architecture.</td></tr><tr><td>Style of source code</td><td style="text-align:left">The style in which you write source code can inhibit vectorization. For example, a common problem with global pointers is that they often prevent the compiler from being able to prove that two memory references refer to distinct locations. Consequently, this prevents certain reordering transformations.</td></tr></tbody></table><p>Many stylistic issues that prevent automatic vectorization by compilers are found in loop structures. The ambiguity arises from the complexity of the keywords, operators, data references, pointer arithmetic, and memory operations within the loop bodies.</p><h1 id="Guidelines-for-Writing-Vectorizable-Code"><a href="#Guidelines-for-Writing-Vectorizable-Code" class="headerlink" title="Guidelines for Writing Vectorizable Code"></a>Guidelines for Writing Vectorizable Code</h1><p>Follow these guidelines to write vectorizable code:</p><ol><li><p>Use simple for loops. Avoid complex loop termination conditions – the upper iteration limit must be invariant within the loop. For the innermost loop in a nest of loops, you could set the upper limit iteration to be a function of the outer loop indices.</p></li><li><p>Write straight-line code. Avoid branches such as switch, goto, or return statements; most function calls; or if constructs that can not be treated as masked assignments.</p></li><li><p>Avoid dependencies between loop iterations or at the least, avoid read-after-write dependencies.</p></li><li><p>Try to use array notations instead of the use of pointers. C programs in particular impose very few restrictions on the use of pointers; aliased pointers may lead to unexpected dependencies. Without help, the compiler often cannot tell whether it is safe to vectorize code containing pointers.</p></li><li><p>Wherever possible, use the loop index directly in array subscripts instead of incrementing a separate counter for use as an array address.</p></li><li><p>Access memory efficiently:</p></li><li><p>Favor inner loops with unit stride.</p><p>Minimize indirect addressing.</p><p>Align your data to 16-byte boundaries (for Intel® SSE instructions).</p></li><li><p>Choose a suitable data layout with care. Most multimedia extension instruction sets are rather sensitive to alignment. The data movement instructions of Intel® SSE, for example, operate much more efficiently on data that is aligned at a 16-byte boundary in memory. Therefore, the success of a vectorizing compiler also depends on its ability to select an appropriate data layout which, in combination with code restructuring (like loop peeling), results in aligned memory accesses throughout the program.</p></li><li><p>Use aligned data structures: Data structure alignment is the adjustment of any data object in relation with other objects.</p><p>You can use the declaration <code>__declspec(align)</code>.</p></li><li><p>Use structure of arrays (SoA) instead of array of structures (AoS): An array is the most common type of data structure that contains a contiguous collection of data items that can be accessed by an ordinal index. You can organize this data as an array of structures (AoS) or as a structure of arrays (SoA). While AoS organization is excellent for encapsulation it can be a hindrance for use of vector processing. To make vectorization of the resulting code more effective, you can also select appropriate data structures.</p></li></ol><h1 id="Obstacles-to-Vectorization"><a href="#Obstacles-to-Vectorization" class="headerlink" title="Obstacles to Vectorization"></a>Obstacles to Vectorization</h1><p>The following do not always prevent vectorization, but frequently either prevent it or cause the compiler to decide that vectorization would not be worthwhile.</p><h2 id="Non-contiguous-memory-access"><a href="#Non-contiguous-memory-access" class="headerlink" title="Non-contiguous memory access:"></a>Non-contiguous memory access:</h2><p>Four consecutive integers or floating-point values, or two consecutive doubles, may be loaded directly from memory in a single SSE instruction. But if the four integers are not adjacent, they must be loaded separately using multiple instructions, which is considerably less efficient. The most common examples of non-contiguous memory access are loops with non-unit stride or with indirect addressing, as in the examples below. The compiler rarely vectorizes such loops, unless the amount of computational work is large compared to the overhead from non-contiguous memory access.</p><p><strong>Example: Non-contiguous Memory Access</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// arrays accessed with stride 2</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> I=<span class="number">0</span>; i&lt;SIZE; I+=<span class="number">2</span>) b[i] += a[i] * x[i];</div><div class="line"></div><div class="line"><span class="comment">// inner loop accesses a with stride SIZE</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;SIZE; j++) &#123;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> I=<span class="number">0</span>; i&lt;SIZE; I++) b[i] += a[i][j] * x[j];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// indirect addressing of x using index array</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> I=<span class="number">0</span>; i&lt;SIZE; I+=<span class="number">2</span>) b[i] += a[i] * x[index[i]];</div></pre></td></tr></table></figure><p>The typical message from the vectorization report is: vectorization possible but seems inefficient, although indirect addressing may also result in the following report: Existence of vector dependence.</p><h2 id="Data-dependencies"><a href="#Data-dependencies" class="headerlink" title="Data dependencies"></a>Data dependencies</h2><p>Vectorization entails changes in the order of operations within a loop, since each SIMD instruction operates on several data elements at once. Vectorization is only possible if this change of order does not change the results of the calculation.</p><ol><li><p>The simplest case is when data elements that are written (stored to) do not appear in any other iteration of the individual loop. In this case, all the iterations of the original loop are independent of each other, and can be executed in any order, without changing the result. The loop may be safely executed using any parallel method, including vectorization. All the examples considered so far fall into<br>this category.</p></li><li><p>When a variable is written in one iteration and read in a subsequent iteration, there is a “read-afterwrite” dependency, also known as a flow dependency, as in this example:</p><p><strong>Example: Flow Dependency</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">A[<span class="number">0</span>]=<span class="number">0</span>;</div><div class="line"><span class="keyword">for</span> (j=<span class="number">1</span>; j&lt;MAX; j++) A[j]=A[j<span class="number">-1</span>]+<span class="number">1</span>;</div><div class="line"></div><div class="line"><span class="comment">// this is equivalent to:</span></div><div class="line">A[<span class="number">1</span>]=A[<span class="number">0</span>]+<span class="number">1</span>;</div><div class="line">A[<span class="number">2</span>]=A[<span class="number">1</span>]+<span class="number">1</span>;</div><div class="line">A[<span class="number">3</span>]=A[<span class="number">2</span>]+<span class="number">1</span>;</div><div class="line">A[<span class="number">4</span>]=A[<span class="number">3</span>]+<span class="number">1</span>;</div></pre></td></tr></table></figure><p>So the value of <code>j</code> gets propagated to all <code>A[j]</code>. This cannot safely be vectorized: if the first two iterations are executed simultaneously by a SIMD instruction, the value of <code>A[1]</code> is used by the second iteration before it has been calculated by the first iteration.</p></li><li><p>When a variable is read in one iteration and written in a subsequent iteration, this is a write-after-read dependency, also known as an anti-dependency, as in the following example:</p><p><strong>Example: Write-after-read Dependency</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (j=<span class="number">1</span>; j&lt;MAX; j++) A[j<span class="number">-1</span>]=A[j]+<span class="number">1</span>;</div><div class="line"></div><div class="line"><span class="comment">// this is equivalent to:</span></div><div class="line">A[<span class="number">0</span>]=A[<span class="number">1</span>]+<span class="number">1</span>;</div><div class="line">A[<span class="number">1</span>]=A[<span class="number">2</span>]+<span class="number">1</span>;</div><div class="line">A[<span class="number">2</span>]=A[<span class="number">3</span>]+<span class="number">1</span>;</div><div class="line">A[<span class="number">3</span>]=A[<span class="number">4</span>]+<span class="number">1</span>;</div></pre></td></tr></table></figure><p>This write-after-read dependency is not safe for general parallel execution, since the iteration with the write may execute before the iteration with the read. However, for vectorization, no iteration with a higher value of <code>j</code> can complete before an iteration with a lower value of <code>j</code>, and so vectorization is safe (that is, it gives the same result as non-vectorized code) in this case. The following example, however, may not be safe, since vectorization might cause some elements of <code>A</code> to be overwritten by the first SIMD instruction before being used for the second SIMD instruction.</p><p><strong>Example: Unsafe Vectorization</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (j=<span class="number">1</span>; j&lt;MAX; j++) &#123;</div><div class="line">	A[j<span class="number">-1</span>]=A[j]+<span class="number">1</span>;</div><div class="line">	B[j]=A[j]*<span class="number">2</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// this is equivalent to:</span></div><div class="line">A[<span class="number">0</span>]=A[<span class="number">1</span>]+<span class="number">1</span>;</div><div class="line">A[<span class="number">1</span>]=A[<span class="number">2</span>]+<span class="number">1</span>;</div><div class="line">A[<span class="number">2</span>]=A[<span class="number">3</span>]+<span class="number">1</span>;</div><div class="line">A[<span class="number">3</span>]=A[<span class="number">4</span>]+<span class="number">1</span>;</div></pre></td></tr></table></figure></li><li><p>Read-after-read situations are not really dependencies, and do not prevent vectorization or parallel execution. If a variable is unwritten, it does not matter how often it is read.</p></li><li><p>Write-after-write, or ‘output’, dependencies, where the same variable is written to in more than one iteration, are in general unsafe for parallel execution, including vectorization.</p></li><li><p>One important exception, that apparently contains all of the above types of dependency:</p><p><strong>Example: Dependency Exception</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sum=<span class="number">0</span>;</div><div class="line"><span class="keyword">for</span> (j=<span class="number">1</span>; j&lt;MAX; j++) sum = sum + A[j]*B[j]</div></pre></td></tr></table></figure><p>Although sum is both read and written in every iteration, the compiler recognizes such reduction idioms, and is able to vectorize them safely. The loop in the first example was another example of a reduction, with a loop-invariant array element in place of a scalar.</p><p>These types of dependencies between loop iterations are sometimes known as loop-carried dependencies.</p><p>The above examples are of proven dependencies. The compiler cannot safely vectorize a loop if there is even a potential dependency. Consider the following example:</p><p><strong>Example: Potential Dependency</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; size; i++) &#123; c[i] = a[i] * b[i]; &#125;</div></pre></td></tr></table></figure><p>In the above example, the compiler needs to determine whether, for some iteration <code>i</code>, <code>c[i]</code> might refer to the same memory location as <code>a[i]</code> or <code>b[i]</code> for a different iteration. Such memory locations are sometimes said to be aliased. For example, if <code>a[i]</code> pointed to the same memory location as <code>c[i-1]</code>, there would be a read-after-write dependency as in the earlier example. If the compiler cannot exclude this possibility, it will not vectorize the loop unless you provide the compiler with hints.</p></li></ol><h1 id="Helping-the-Intel®-C-Compiler-to-Vectorize"><a href="#Helping-the-Intel®-C-Compiler-to-Vectorize" class="headerlink" title="Helping the Intel® C++ Compiler to Vectorize"></a>Helping the Intel® C++ Compiler to Vectorize</h1><p>Sometimes the Intel® C++ Compiler has insufficient information to decide to vectorize a loop. There are several ways to provide additional information to the compiler:</p><h2 id="Pragmas"><a href="#Pragmas" class="headerlink" title="Pragmas"></a>Pragmas</h2><ol><li><p><code>#pragma ivdep</code>: may be used to tell the compiler that it may safely ignore any potential data dependencies. (The compiler will not ignore proven dependencies). Use of this pragma when there are dependencies may lead to incorrect results.</p></li><li><p><code>#pragma loop count (n)</code>: may be used to advise the compiler of the typical trip count of the loop. This may help the compiler to decide whether vectorization is worthwhile, or whether or not it should generate alternative code paths for the loop.</p></li><li><p><code>#pragma vector always</code>: asks the compiler to vectorize the loop if it is safe to do so, whether or not the compiler thinks that will improve performance.</p></li><li><p><code>#pragma vector align</code>: asserts that data within the following loop is aligned (to a 16-byte boundary, for Intel® SSE instruction sets).</p></li><li><p><code>#pragma novector</code>: asks the compiler not to vectorize a particular loop.</p></li><li><p><code>#pragma vector nontemporal</code>: gives a hint to the compiler that data will not be reused, and therefore to use streaming stores that bypass cache.</p></li></ol><h2 id="Keywords"><a href="#Keywords" class="headerlink" title="Keywords"></a>Keywords</h2><p>The restrict keyword may be used to assert that the memory referenced by a pointer is not aliased, i.e. that it is not accessed in any other way. The keyword requires the use of either the <code>[Q]restrict</code> or <code>[Q]c99</code> compiler options.</p><p>The restrict qualifier in the argument list lets the compiler know that there are no other aliases to the memory to which the pointers point. In other words, the pointer for which it is used provides the only means of accessing the memory in question in the scope in which the pointers live. Even if the code gets vectorized without the restrict keyword, the compiler checks for aliasing at run-time, if the restrict keyword was used.</p><h2 id="Options-switches"><a href="#Options-switches" class="headerlink" title="Options/switches"></a>Options/switches</h2><p>You can use options to enable different levels of optimizations to achieve automatic vectorization:</p><ol><li><p><strong>Interprocedural optimization (IPO)</strong>: Enable IPO using <code>[Q]ip</code> option within a single source file, or using <code>[Q]ipo</code> across source files. You provide the compiler with additional information (trip counts, alignment, or data dependencies) about a loop. Enabling IPO may also allow inlining of function calls.</p></li><li><p><strong>Disambiguation of pointers and arrays</strong>: Use the options <code>/Oa</code> (Windows) or <code>–fno-alias</code> (Linux<em> or OS</em> X) to assert there is no aliasing of memory references, that is, the same memory location is not accessed via different arrays or pointers. Other options make more limited assertions, for example, <code>/Qalias-args-</code>(Windows) or <code>-fargument-noalias</code> (Linux<em> or OS X</em>) asserts that function arguments cannot alias each other (that is, they cannot overlap).</p><p>The <code>/Qansi-alias</code> (<code>-fargument-alias</code>) options allow the compiler to assume strict adherence to the aliasing rules in the ISO C standard. Use these options responsibly; if you use these options when memory is aliased it may lead to incorrect results.</p></li><li><p><strong>High-level optimizations (HLO)</strong>: Enable HLO with option <code>O3</code>. This will enable additional loop optimizations that make it easier for the compiler to vectorize the transformed loops. The HLO report, obtained using the <code>[Q]opt-report-phase[:]</code> loop option or the corresponding IDE selection, tells you whether some of these additional transformations occurred.</p></li></ol></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">------本文结束&nbsp<i class="fa fa-paw"></i>&nbsp感谢阅读------</div></div></div><div style="text-align:center;color:#ccc;font-size:14px;margin-top:15px"><div class="jiathis_style"><a class="jiathis_button_tsina">微博</a> <a class="jiathis_button_weixin">微信</a> <a class="jiathis_button_douban">豆瓣</a> <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a> <a class="jiathis_counter_style"></a></div><script type="text/javascript">var jiathis_config={summary:"",ralateuid:{tsina:"HamsterSi"},shortUrl:!1,hideMore:!1}</script><script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script></div><div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>感谢打赏</div><button id="rewardButton" disable="enable" onclick='var e=document.getElementById("QR");"none"===e.style.display?e.style.display="block":e.style.display="none"'><span style="font-size:25px">赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"><img id="wechat_qr" src="/images/pay-wechat.jpg" alt="Hamster Si WeChat Pay"><p>微信打赏</p></div><div id="alipay" style="display:inline-block"><img id="alipay_qr" src="/images/pay-alipay.jpg" alt="Hamster Si Alipay"><p>支付宝打赏</p></div></div></div></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2017/07/Application-Optimization-with-Intel-Compiler/" rel="next" title="Application Optimization with Intel Compiler"><i class="fa fa-chevron-left"></i> Application Optimization with Intel Compiler</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2017/07/2017-07 Cat/" rel="prev" title="2017 - 07 Cat">2017 - 07 Cat <i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class="post-spread"></div><div id="uyan_frame"></div><script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2141218"></script></div></div><div class="comments" id="comments"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview">站点概览</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/logo@2x.png" alt="Hamster Si"><p class="site-author-name" itemprop="name">Hamster Si</p><p class="site-description motion-element" itemprop="description">生性涼薄 擇木而修</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives"><span class="site-state-item-count">21</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><span class="site-state-item-count">5</span> <span class="site-state-item-name">分类</span></div><div class="site-state-item site-state-tags"><a href="/tags"><span class="site-state-item-count">18</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="http://hamstersi.com/about/" target="_blank" title="WeChat" class="social-link-format"><i class="fa fa-fw fa-wechat"></i> WeChat </a></span><span class="links-of-author-item"><a href="http://www.weibo.com/suluoai/" target="_blank" title="Weibo" class="social-link-format"><i class="fa fa-fw fa-weibo"></i> Weibo </a></span><span class="links-of-author-item"><a href="https://www.douban.com/people/63923742/" target="_blank" title="Douban" class="social-link-format"><i class="fa fa-fw fa-pagelines"></i> Douban</a></span></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Guidelines-to-Vectorize-Innermost-Loops"><span class="nav-number">1.</span> <span class="nav-text">Guidelines to Vectorize Innermost Loops</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Restrictions"><span class="nav-number">2.</span> <span class="nav-text">Restrictions</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Guidelines-for-Writing-Vectorizable-Code"><span class="nav-number">3.</span> <span class="nav-text">Guidelines for Writing Vectorizable Code</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Obstacles-to-Vectorization"><span class="nav-number">4.</span> <span class="nav-text">Obstacles to Vectorization</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Non-contiguous-memory-access"><span class="nav-number">4.1.</span> <span class="nav-text">Non-contiguous memory access:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Data-dependencies"><span class="nav-number">4.2.</span> <span class="nav-text">Data dependencies</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Helping-the-Intel®-C-Compiler-to-Vectorize"><span class="nav-number">5.</span> <span class="nav-text">Helping the Intel® C++ Compiler to Vectorize</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Pragmas"><span class="nav-number">5.1.</span> <span class="nav-text">Pragmas</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Keywords"><span class="nav-number">5.2.</span> <span class="nav-text">Keywords</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Options-switches"><span class="nav-number">5.3.</span> <span class="nav-text">Options/switches</span></a></li></ol></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2017</span> - <span class="author" itemprop="copyrightHolder">Hamster Si</span></div><div class="powered-by">HamsterSi.com</div><div class="theme-info">Powered By <a class="theme-link" href="https://www.qcloud.com/">QCloud</a>, <a class="theme-link" href="https://hexo.io">HEXO</a>, <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT</a></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="popoverlay">').css("overflow","hidden"),$(".popup").toggle()}var isfetched=!1,search_path="search.xml";0==search_path.length&&(search_path="search.xml");var path="/"+search_path,searchFunc=function(e,t,a){"use strict";$.ajax({url:e,dataType:"xml",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var r=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),c=document.getElementById(t),n=document.getElementById(a);c.addEventListener("input",function(){var e=0,t='<ul class="search-result-list">',a=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="",this.value.trim().length>1&&r.forEach(function(r){var c=!1,n=r.title.trim().toLowerCase(),s=r.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),o=decodeURIComponent(r.url),i=-1,l=-1,p=-1;if(""!=n&&a.forEach(function(e,t){i=n.indexOf(e),l=s.indexOf(e),(i>=0||l>=0)&&(c=!0,0==t&&(p=l))}),c){e+=1,t+="<li><a href='"+o+"' class='search-result-title'>"+n+"</a>";var h=r.content.trim().replace(/<[^>]+>/g,"");if(p>=0){var u=p-20,d=p+80;u<0&&(u=0),0==u&&(d=50),d>h.length&&(d=h.length);var f=h.substring(u,d);a.forEach(function(e){var t=new RegExp(e,"gi");f=f.replace(t,'<b class="search-keyword">'+e+"</b>")}),t+='<p class="search-result">'+f+"...</p>"}t+="</li>"}}),t+="</ul>",0==e&&(t='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'),""==a&&(t='<div id="no-result"><i class="fa fa-search fa-5x" /></div>'),n.innerHTML=t}),proceedsearch()}})};$(".popup-trigger").click(function(e){e.stopPropagation(),0==isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(function(e){$(".popup").hide(),$(".popoverlay").remove(),$("body").css("overflow","")}),$(".popup").click(function(e){e.stopPropagation()})</script></body></html>